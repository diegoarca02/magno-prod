<div class="d-flex flex-column flex-root">
    <!--begin::Page-->
    <div class="page d-flex flex-row flex-column-fluid">
        <!--begin::Aside-->
        <app-side-bar (eventPermisos)="handlePermisos($event)"></app-side-bar>
        <!--end::Aside-->
        <!--begin::Wrapper-->
        <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
            <!--begin::Header-->
            <app-top-bar></app-top-bar>
            <!--end::Header-->
            <!--begin::Content-->
            <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                <!--begin::Toolbar-->
                <div class="toolbar" id="kt_toolbar">
                    <!--begin::Container-->
                    <div id="kt_toolbar_container" class="container-fluid d-flex flex-stack">
                        <!--begin::Page title-->
                        <div data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}" class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
                            <!--begin::Title-->
                            <h1 class="d-flex align-items-center text-dark fw-bolder fs-3 my-1">Productos
                                <!--begin::Separator-->
                                <span class="h-20px border-gray-200 border-start mx-5"></span>
                                <!--end::Separator-->
                                <!--begin::Description-->
                                <ol class="breadcrumb text-muted fs-6 fw-semibold">
                                    <li class="breadcrumb-item pe-3">Productos</li>
                                    
                                </ol>
                      
                                <!--end::Description--></h1>
                            <!--end::Title-->
                        </div>
                        <!--end::Page title-->
                        <!--begin::Actions-->
                        <div class="d-flex align-items-center py-1">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="text-muted fw-bold fs-7">Panel Administrador</span>
                            </h3>
                        </div>
                        <!--end::Actions-->
                    </div>
                    <!--end::Container-->
                </div>
                <!--end::Toolbar-->
                <!--begin::Post-->
                <div class="post d-flex flex-column-fluid" id="kt_post">
                    <!--begin::Container-->
                    <div id="kt_content_container" class="container-xxl">
                        <div class="card mb-10">
                            <!--begin::Card header-->
                            <div class="card-header border-0 py-7">
                                <!--begin::Tabs-->
                                <h3 class="card-title align-items-start flex-column">
                                    <span class="card-label fw-bold fs-3 mb-1 fw-700">
                                        Productos
                                        ({{productos.length}}/{{todos}})
                                    </span>
                                    <span class="text-muted mt-1 fw-semibold fs-7 d-none d-sm-block">Lorem ipsum dolor sit amet consectetur adipisicing elit.</span>
                                </h3>
                                <!--end::Tabs-->
                        
                                <!--begin::Create campaign button-->
                                <div class="card-toolbar d-none d-sm-block">
                                    <a [routerLink]="['/productos/create']" class="btn btn-dark" *ngIf="permisos.includes('3001')">
                                        <span class="svg-icon svg-icon-3"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.3" d="M8.9 21L7.19999 22.6999C6.79999 23.0999 6.2 23.0999 5.8 22.6999L4.1 21H8.9ZM4 16.0999L2.3 17.8C1.9 18.2 1.9 18.7999 2.3 19.1999L4 20.9V16.0999ZM19.3 9.1999L15.8 5.6999C15.4 5.2999 14.8 5.2999 14.4 5.6999L9 11.0999V21L19.3 10.6999C19.7 10.2999 19.7 9.5999 19.3 9.1999Z" fill="currentColor"/>
                                            <path d="M21 15V20C21 20.6 20.6 21 20 21H11.8L18.8 14H20C20.6 14 21 14.4 21 15ZM10 21V4C10 3.4 9.6 3 9 3H4C3.4 3 3 3.4 3 4V21C3 21.6 3.4 22 4 22H9C9.6 22 10 21.6 10 21ZM7.5 18.5C7.5 19.1 7.1 19.5 6.5 19.5C5.9 19.5 5.5 19.1 5.5 18.5C5.5 17.9 5.9 17.5 6.5 17.5C7.1 17.5 7.5 17.9 7.5 18.5Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                        Nuevo producto
                                    </a>
                                </div>
                                <!--end::Create campaign button-->
                            </div>
                            <!--end::Card header-->
                            <div class="card-header border-0 mb-5">

                                <div class="card-title">
                                    <div class="d-flex align-items-center position-relative my-1">
                                         
                                        <span class="svg-icon svg-icon-muted svg-icon-1 position-absolute ms-6"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor"/>
                                            <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor"/>
                                            </svg>
                                        </span> 
                                       
                                        <input (keyup)="init_productos()" (keyup.enter)="init_productos()" type="text" class="form-control form-control-solid w-300px ps-15 me-3" placeholder="Buscar producto" name="filtro" [(ngModel)]="filtro"/>

                                    </div>

                                    
                                </div>

                                <div class="card-toolbar">
                                    <!--begin::Menu-->
                                    <div class="me-0">
                                        <div class="dropdown">
                                            <button class="btn btn-secondary btn-icon dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <span class="svg-icon svg-icon-muted icon-size-2" style="margin-right: 0px !important;">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path opacity="0.3" d="M22.1 11.5V12.6C22.1 13.2 21.7 13.6 21.2 13.7L19.9 13.9C19.7 14.7 19.4 15.5 18.9 16.2L19.7 17.2999C20 17.6999 20 18.3999 19.6 18.7999L18.8 19.6C18.4 20 17.8 20 17.3 19.7L16.2 18.9C15.5 19.3 14.7 19.7 13.9 19.9L13.7 21.2C13.6 21.7 13.1 22.1 12.6 22.1H11.5C10.9 22.1 10.5 21.7 10.4 21.2L10.2 19.9C9.4 19.7 8.6 19.4 7.9 18.9L6.8 19.7C6.4 20 5.7 20 5.3 19.6L4.5 18.7999C4.1 18.3999 4.1 17.7999 4.4 17.2999L5.2 16.2C4.8 15.5 4.4 14.7 4.2 13.9L2.9 13.7C2.4 13.6 2 13.1 2 12.6V11.5C2 10.9 2.4 10.5 2.9 10.4L4.2 10.2C4.4 9.39995 4.7 8.60002 5.2 7.90002L4.4 6.79993C4.1 6.39993 4.1 5.69993 4.5 5.29993L5.3 4.5C5.7 4.1 6.3 4.10002 6.8 4.40002L7.9 5.19995C8.6 4.79995 9.4 4.39995 10.2 4.19995L10.4 2.90002C10.5 2.40002 11 2 11.5 2H12.6C13.2 2 13.6 2.40002 13.7 2.90002L13.9 4.19995C14.7 4.39995 15.5 4.69995 16.2 5.19995L17.3 4.40002C17.7 4.10002 18.4 4.1 18.8 4.5L19.6 5.29993C20 5.69993 20 6.29993 19.7 6.79993L18.9 7.90002C19.3 8.60002 19.7 9.39995 19.9 10.2L21.2 10.4C21.7 10.5 22.1 11 22.1 11.5ZM12.1 8.59998C10.2 8.59998 8.6 10.2 8.6 12.1C8.6 14 10.2 15.6 12.1 15.6C14 15.6 15.6 14 15.6 12.1C15.6 10.2 14 8.59998 12.1 8.59998Z" fill="currentColor"/>
                                                    <path d="M17.1 12.1C17.1 14.9 14.9 17.1 12.1 17.1C9.30001 17.1 7.10001 14.9 7.10001 12.1C7.10001 9.29998 9.30001 7.09998 12.1 7.09998C14.9 7.09998 17.1 9.29998 17.1 12.1ZM12.1 10.1C11 10.1 10.1 11 10.1 12.1C10.1 13.2 11 14.1 12.1 14.1C13.2 14.1 14.1 13.2 14.1 12.1C14.1 11 13.2 10.1 12.1 10.1Z" fill="currentColor"/>
                                                    </svg>
                                                </span>   
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li *ngIf="permisos.includes('3008')">
                                                    <a class="dropdown-item cursor-pointer" [routerLink]="['/productos/colores']">
                                                        Colores
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="dropdown-item cursor-pointer" [routerLink]="['/manufactura/productos/telas/importacion']">
                                                        Importación
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="dropdown-item cursor-pointer" [routerLink]="['/manufactura/colores/telas/importacion']">
                                                        Importar de colores
                                                    </a>
                                                </li>


                                            </ul>
                                        </div>
                                    </div>
                                    <!--end::Menu-->
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-stack flex-wrap gap-4 mb-7 mt-7">
                            <!--begin::Sort-->
                            <div class="d-flex align-items-center flex-wrap gap-3 gap-xl-9">
                                <!--begin::Type-->
                                <div class="d-flex align-items-center fw-bold">
                                    <!--begin::Label-->
                                    <div class="text-muted fs-7">Tipo</div>
                                    <!--end::Label-->
                                    <!--begin::Select-->
                                    <select class="form-select form-select-transparent text-dark fs-7 lh-1 fw-bold py-0 ps-3 w-auto" name="filter_tipo" [(ngModel)]="filter_tipo" (change)="set_tipo()" (change)="filtro_avanzado()">
                                        <option value="Todos" selected="selected">Todos</option>
                                        <option value="Tela">Tela</option>
                                        <option value="Ropa">Ropa</option>
                                        <option value="Acero">Acero</option>
                                    </select>
                                    <!--end::Select-->
                                </div>
                                <!--end::Type-->
                                <div class="d-flex align-items-center fw-bold">
                                    <!--begin::Label-->
                                    <div class="text-muted fs-7">Categoría</div>
                                    <!--end::Label-->
                                    <!--begin::Select-->
                                    <select class="form-select form-select-transparent text-dark fs-7 lh-1 fw-bold py-0 ps-3 w-auto" name="filter_categoria" [(ngModel)]="filter_categoria" (change)="filtro_avanzado()">
                                        <option value="Todos" selected="selected">Todos</option>
                                        <option value="{{item.titulo}}" *ngFor="let item of categorias">{{item.titulo}}</option>
                                      
                                    </select>
                                    <!--end::Select-->
                                </div>
                                <!--end::Type-->
                                <div class="d-flex align-items-center fw-bold">
                                    <!--begin::Label-->
                                    <div class="text-muted fs-7">Estado</div>
                                    <!--end::Label-->
                                    <!--begin::Select-->
                                    <select class="form-select form-select-transparent text-dark fs-7 lh-1 fw-bold py-0 ps-3 w-auto" name="filter_estado" [(ngModel)]="filter_estado" (change)="filtro_avanzado()">
                                        <option value="Todos" selected="selected">Todos</option>
                                        <option value="Publicado" selected="selected">Publicado</option>
                                        <option value="Borrador" selected="selected">Borrador</option>
                                    </select>
                                    <!--end::Select-->
                                </div>
                                <!--end::Type-->
                                <div class="d-flex align-items-center fw-bold">
                                    <code class="cursor-pointer" (click)="restablecer()">Restablecer</code>
                                </div>
                            </div>
                            <!--end::Sort-->
                            
                            <div class="d-flex align-items-center fw-bold" *ngIf="permisos.includes('3002')">
                                <button *ngIf="tab_active == 'Productos'" class="btn btn-dark btn-sm" (click)="tab_active = 'Papelera'">
                                    <span class="svg-icon svg-icon-muted svg-icon-5"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path opacity="0.3" d="M19.5997 3.52344H2.39639C2.09618 3.53047 1.8003 3.59658 1.52565 3.718C1.25101 3.83941 1.00298 4.01375 0.79573 4.23106C0.588484 4.44837 0.426087 4.70438 0.317815 4.98447C0.209544 5.26456 0.157521 5.56324 0.164719 5.86344C0.157521 6.16364 0.209544 6.46232 0.317815 6.74241C0.426087 7.0225 0.588484 7.27851 0.79573 7.49581C1.00298 7.71312 1.25101 7.88746 1.52565 8.00888C1.8003 8.1303 2.09618 8.19641 2.39639 8.20344H19.5997C19.8999 8.19641 20.1958 8.1303 20.4704 8.00888C20.7451 7.88746 20.9931 7.71312 21.2004 7.49581C21.4076 7.27851 21.57 7.0225 21.6783 6.74241C21.7866 6.46232 21.8386 6.16364 21.8314 5.86344C21.8386 5.56324 21.7866 5.26456 21.6783 4.98447C21.57 4.70438 21.4076 4.44837 21.2004 4.23106C20.9931 4.01375 20.7451 3.83941 20.4704 3.718C20.1958 3.59658 19.8999 3.53047 19.5997 3.52344Z" fill="currentColor" fill-opacity="0.8"/>
                                        <path d="M2.39453 8.20361L4.01953 18.3111C4.15644 19.145 4.58173 19.9043 5.22121 20.4567C5.8607 21.009 6.6738 21.3194 7.5187 21.3336H14.5712C15.4215 21.3202 16.2395 21.006 16.8801 20.4468C17.5207 19.8875 17.9424 19.1193 18.0704 18.2786L19.5979 8.20361H2.39453ZM9.28453 16.3178C9.28453 16.5333 9.19893 16.7399 9.04656 16.8923C8.89418 17.0447 8.68752 17.1303 8.47203 17.1303C8.25654 17.1303 8.04988 17.0447 7.89751 16.8923C7.74513 16.7399 7.65953 16.5333 7.65953 16.3178V12.4069C7.65953 12.1915 7.74513 11.9848 7.89751 11.8324C8.04988 11.68 8.25654 11.5944 8.47203 11.5944C8.68752 11.5944 8.89418 11.68 9.04656 11.8324C9.19893 11.9848 9.28453 12.1915 9.28453 12.4069V16.3178ZM14.322 16.3178C14.322 16.5333 14.2364 16.7399 14.0841 16.8923C13.9317 17.0447 13.725 17.1303 13.5095 17.1303C13.294 17.1303 13.0874 17.0447 12.935 16.8923C12.7826 16.7399 12.697 16.5333 12.697 16.3178V12.4069C12.697 12.1915 12.7826 11.9848 12.935 11.8324C13.0874 11.68 13.294 11.5944 13.5095 11.5944C13.725 11.5944 13.9317 11.68 14.0841 11.8324C14.2364 11.9848 14.322 12.1915 14.322 12.4069V16.3178Z" fill="currentColor" fill-opacity="0.8"/>
                                        <path d="M17.3895 4.87755C17.2529 4.87776 17.1185 4.84303 16.999 4.77667C16.8796 4.71031 16.7791 4.61452 16.707 4.49839L14.5945 1.24839C14.488 1.07063 14.4544 0.858502 14.5009 0.656521C14.5473 0.45454 14.6702 0.2784 14.8437 0.165055C15.0215 0.0626479 15.2311 0.0303209 15.4315 0.0744071C15.6319 0.118493 15.8086 0.235816 15.927 0.403388L18.0395 3.70755C18.1434 3.88599 18.1755 4.09728 18.1292 4.2985C18.0829 4.49972 17.9618 4.67577 17.7904 4.79089C17.6659 4.85225 17.5282 4.88202 17.3895 4.87755Z" fill="currentColor" fill-opacity="0.8"/>
                                        <path d="M4.49988 4.8885C4.34679 4.8928 4.19591 4.85131 4.06655 4.76933C3.89514 4.65422 3.77399 4.47817 3.72771 4.27694C3.68143 4.07572 3.71349 3.86443 3.81738 3.686L5.98405 0.435999C6.09739 0.262485 6.27353 0.13961 6.47551 0.0931545C6.6775 0.0466989 6.88962 0.0802727 7.06738 0.186832C7.23676 0.303623 7.35627 0.479597 7.40239 0.680101C7.4485 0.880606 7.41788 1.09111 7.31655 1.27017L5.20405 4.52017C5.12881 4.63747 5.0243 4.73313 4.90082 4.79773C4.77733 4.86232 4.63914 4.8936 4.49988 4.8885Z" fill="currentColor" fill-opacity="0.8"/>
                                        </svg>
                                    </span>

                                    Productos Papelera
                                </button>
                                <button *ngIf="tab_active == 'Papelera'" class="btn btn-dark btn-sm" (click)="tab_active = 'Productos'">
                                    <span class="svg-icon svg-icon-muted svg-icon-5"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M6.5 11C8.98528 11 11 8.98528 11 6.5C11 4.01472 8.98528 2 6.5 2C4.01472 2 2 4.01472 2 6.5C2 8.98528 4.01472 11 6.5 11Z" fill="currentColor"/>
                                        <path opacity="0.3" d="M13 6.5C13 4 15 2 17.5 2C20 2 22 4 22 6.5C22 9 20 11 17.5 11C15 11 13 9 13 6.5ZM6.5 22C9 22 11 20 11 17.5C11 15 9 13 6.5 13C4 13 2 15 2 17.5C2 20 4 22 6.5 22ZM17.5 22C20 22 22 20 22 17.5C22 15 20 13 17.5 13C15 13 13 15 13 17.5C13 20 15 22 17.5 22Z" fill="currentColor"/>
                                        </svg>
                                    </span>

                                    Productos Activos
                                </button>
                            </div>
                           
                        </div>



                        <ng-container *ngIf="tab_active == 'Productos'">
                            <div class="card mb-5" *ngFor="let item of productos;let idx = index">
                                <div class="card-body d-flex justify-content-between" style="padding: 1.5rem 2.25rem;">
                                    <div class="d-flex">
                                        <!--begin::Thumbnail-->
                                        <a class="symbol symbol-50px">
                                            <span class="symbol-label" style="background-image:url({{item.producto.portada}});"></span>
                                        </a>
                                        <!--end::Thumbnail-->
                                        <div class="ms-5" style="max-width: 300px !important">
                                            <!--begin::Title-->
                                            <a class="text-gray-800 fs-6 fw-bold text-1 fw-600 cursor-pointer" style="font-size: 1rem!important;">
                                                
                                                <ng-container  *ngIf="item.producto.minutos_pasados <= min_new_tag ">
                                                    <span class="badge badge-warning text-dark" style="font-size: .7rem;">
                                                        Nuevo
                                                    </span>
                                                    &nbsp;
                                                </ng-container>
                                                
                                                <span placement="top" tooltipClass="bg_toolip" ngbTooltip="{{item.producto.titulo}}">
                                                    <span class="me-5">{{item.producto.titulo}}</span>
                                                    <span [ngClass]="{'bg-success': item.producto.estado == 'Publicado',
                                                    'bg-danger': item.producto.estado == 'Borrador'}" 
                                                    class="bullet bullet-dot h-6px w-6px translate-middle top-0 start-50">
                                                    </span>
                                                </span>
                                            </a>
                                            <code>
                                                {{item.producto.tipo}} - {{item.producto.categoria}}
                                            </code>
                                            &nbsp;  &nbsp;
                                        
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Precios no asignados" 
                                            class="bi bi-tag text-danger me-2" *ngIf="item.precio_status != 0">
                                            </i>
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Sin variaciones" 
                                            class="bi bi-palette text-danger me-2" *ngIf="item.variaciones.length == 0">
                                            </i>
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Cantidad por contenedor incompleto." *ngIf="!item.producto.cantidad_contenedor"
                                            class="bi bi-app text-danger me-2">
                                            </i>
        
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div [ngStyle]="{'background': subitem.color}" 
                                        *ngFor="let subitem of item.etiquetas" 
                                        class="badge badge-primary mb-1 me-3"
                                        style="height: fit-content !important;">
                                            {{subitem.etiqueta}}
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-end">
                                        <div class="symbol-group symbol-hover flex-grow-1 min-w-100px pe-2 d-flex justify-content-end">
                                            <!--begin::User-->
                                            <div class="symbol symbol-circle symbol-25px" *ngFor="let subitem of item.variaciones" (click)="redirect_detail(subitem._id)">
                                                <div  *ngIf="item.producto.tipo == 'Ropa'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}} {{subitem.talla}}">
                                                    {{subitem.talla}}
                                                </div>
                                                <div *ngIf="item.producto.tipo == 'Tela'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}}">
                                            
                                                </div>
                                                <div *ngIf="item.producto.tipo == 'Acero'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}}">
                                            
                                                </div>
                                            </div>
                                            <!--end::User-->
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer d-flex" style="padding: 1.3rem 2.25rem;">
                                    <a *ngIf="permisos.includes('3003')" [routerLink]="['/etiquetado',item.producto._id]" 
                                    target="_blank" placement="left" ngbTooltip="Etiquetado" class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <i class="bi bi-upc"></i>
                                        <!--end::Svg Icon-->
                                    </a>
                                    
                                    <a *ngIf="permisos.includes('3004')" [routerLink]="['/ventas/create']" [queryParams]="{payload: item.producto._id,tipo: 'producto'}" 
                                    target="_blank" placement="left" ngbTooltip="Ir a venta" 
                                    class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <i class="bi bi-bag"></i>
                                        <!--end::Svg Icon-->
                                    </a>
                                    <a *ngIf="permisos.includes('3005')" [routerLink]="['/informes/reporte-pedidos', item.producto._id]" 
                                    target="_blank" placement="left" ngbTooltip="Future Stock" 
                                    class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <i class="bi bi-box"></i>
                                        <!--end::Svg Icon-->
                                    </a>
                                    <a *ngIf="permisos.includes('3006')" placement="left" ngbTooltip="Editar producto" [routerLink]="['/productos/edit',item.producto._id]"
                                     class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <span class="svg-icon svg-icon-3">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path opacity="0.3" d="M21.4 8.35303L19.241 10.511L13.485 4.755L15.643 2.59595C16.0248 2.21423 16.5426 1.99988 17.0825 1.99988C17.6224 1.99988 18.1402 2.21423 18.522 2.59595L21.4 5.474C21.7817 5.85581 21.9962 6.37355 21.9962 6.91345C21.9962 7.45335 21.7817 7.97122 21.4 8.35303ZM3.68699 21.932L9.88699 19.865L4.13099 14.109L2.06399 20.309C1.98815 20.5354 1.97703 20.7787 2.03189 21.0111C2.08674 21.2436 2.2054 21.4561 2.37449 21.6248C2.54359 21.7934 2.75641 21.9115 2.989 21.9658C3.22158 22.0201 3.4647 22.0084 3.69099 21.932H3.68699Z" fill="currentColor"></path>
                                                <path d="M5.574 21.3L3.692 21.928C3.46591 22.0032 3.22334 22.0141 2.99144 21.9594C2.75954 21.9046 2.54744 21.7864 2.3789 21.6179C2.21036 21.4495 2.09202 21.2375 2.03711 21.0056C1.9822 20.7737 1.99289 20.5312 2.06799 20.3051L2.696 18.422L5.574 21.3ZM4.13499 14.105L9.891 19.861L19.245 10.507L13.489 4.75098L4.13499 14.105Z" fill="currentColor"></path>
                                            </svg>
                                        </span>
                                        <!--end::Svg Icon-->
                                    </a>
                                    <a *ngIf="permisos.includes('3007')" class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px"
                                     data-bs-toggle="modal" [attr.data-bs-target]="'#delete-'+item.producto._id">
                                                                            
                                        <span *ngIf="item.producto.estado == 'Publicado'" class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.3" d="M6 19.7C5.7 19.7 5.5 19.6 5.3 19.4C4.9 19 4.9 18.4 5.3 18L18 5.3C18.4 4.9 19 4.9 19.4 5.3C19.8 5.7 19.8 6.29999 19.4 6.69999L6.7 19.4C6.5 19.6 6.3 19.7 6 19.7Z" fill="currentColor"/>
                                            <path d="M18.8 19.7C18.5 19.7 18.3 19.6 18.1 19.4L5.40001 6.69999C5.00001 6.29999 5.00001 5.7 5.40001 5.3C5.80001 4.9 6.40001 4.9 6.80001 5.3L19.5 18C19.9 18.4 19.9 19 19.5 19.4C19.3 19.6 19 19.7 18.8 19.7Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                        
                                        <span *ngIf="item.producto.estado == 'Borrador'" class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                            <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    </a>
                                
                                    
                                    <div class="modal fade" id="duplicar-{{item.producto._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h3 class="modal-title">Duplicar producto</h3>
                                                        <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                            <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/metronic/releases/2022-07-14-092914/core/html/src/media/icons/duotune/arrows/arr088.svg-->
                                                            <span class="svg-icon svg-icon-muted svg-icon-2hx"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <rect opacity="0.5" x="7.05025" y="15.5356" width="12" height="2" rx="1" transform="rotate(-45 7.05025 15.5356)" fill="currentColor"/>
                                                                <rect x="8.46447" y="7.05029" width="12" height="2" rx="1" transform="rotate(45 8.46447 7.05029)" fill="currentColor"/>
                                                                </svg>
                                                            </span>
                                                                <!--end::Svg Icon-->
                                                        </div>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>Confirmación para la duplicación del producto junto con sus colores, compocisiones y títulos.</p>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button  data-bs-dismiss="modal" aria-label="Close" class="btn btn-light me-3">
                                                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                                                </svg>
                                                            </span>
                                
                                                            Descartar
                                                        </button>
                                                        <ng-container >
                                                            <button *ngIf="!load_btn_duplicar" type="button" class="btn btn-dark" (click)="duplicar(item.producto._id)">
                                                                <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                                    <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                                    </svg>
                                                                </span>
                                                                Confirmar
                                                            </button>
                                                            <button *ngIf="load_btn_duplicar" class="btn btn-dark" type="button" disabled>
                                                                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                                                Procensando...
                                                            </button>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                    </div> 
                                    <div class="modal fade" id="delete-{{item.producto._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Desactivar {{item.producto.titulo}}</h3>
                                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                        <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/metronic/releases/2022-07-14-092914/core/html/src/media/icons/duotune/arrows/arr088.svg-->
                                                        <span class="svg-icon svg-icon-muted svg-icon-2hx"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <rect opacity="0.5" x="7.05025" y="15.5356" width="12" height="2" rx="1" transform="rotate(-45 7.05025 15.5356)" fill="currentColor"/>
                                                            <rect x="8.46447" y="7.05029" width="12" height="2" rx="1" transform="rotate(45 8.46447 7.05029)" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                            <!--end::Svg Icon-->
                                                    </div>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Confirmación para la eliminación del producto.</p>
                                                </div>
                                                <div class="modal-footer">
                                                    
                                                    <button type="button" id="kt_modal_new_card_cancel" class="btn btn-light me-3"  data-bs-dismiss="modal">
                                                        <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                        Descartar
                                                    </button>
    
                                                    <button *ngIf="!load_del" type="button" class="btn btn-dark" (click)="delete_producto(item.producto._id)">
                                                        <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                            <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                        Confirmar
                                                    </button>
    
                                                    <button *ngIf="load_del" class="btn btn-dark" type="button" disabled>
                                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                                        Procesando...
                                                    </button>
    
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                    <!--end::Menu-->
                                </div>
                            </div>
                            <ng-container *ngIf="tipo_option == 'Todos'">
                                <div class="text-center" *ngIf="todos != productos.length">
                                    <code class="cursor-pointer" (click)="click_matriculas()">
                                        Cargar más
                                    </code>
                                </div>
                            </ng-container>
                        </ng-container>

                        <ng-container *ngIf="tab_active == 'Papelera'">
                            <div class="card mb-5" *ngFor="let item of productos_papelera;let idx = index">
                                <div class="card-body d-flex justify-content-between" style="padding: 1.5rem 2.25rem;">
                                    <div class="d-flex">
                                        <!--begin::Thumbnail-->
                                        <a class="symbol symbol-50px">
                                            <span class="symbol-label" style="background-image:url({{item.producto.portada}});"></span>
                                        </a>
                                        <!--end::Thumbnail-->
                                        <div class="ms-5" style="max-width: 300px !important">
                                            <!--begin::Title-->
                                            <a class="text-gray-800 fs-6 fw-bold text-1 fw-600 cursor-pointer" style="font-size: 1rem!important;">
                                                
                                                <ng-container  *ngIf="item.producto.minutos_pasados <= min_new_tag ">
                                                    <span class="badge badge-warning text-dark" style="font-size: .7rem;">
                                                        Nuevo
                                                    </span>
                                                    &nbsp;
                                                </ng-container>
                                                
                                                <span placement="top" tooltipClass="bg_toolip" ngbTooltip="{{item.producto.titulo}}">
                                                    <span class="me-5">{{item.producto.titulo}}</span>
                                                    <span [ngClass]="{'bg-success': item.producto.estado == 'Publicado',
                                                    'bg-danger': item.producto.estado == 'Borrador'}" 
                                                    class="bullet bullet-dot h-6px w-6px translate-middle top-0 start-50">
                                                    </span>
                                                </span>
                                            </a>
                                            <code>
                                                {{item.producto.tipo}} - {{item.producto.categoria}}
                                            </code>
                                            &nbsp;  &nbsp;
                                        
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Precios no asignados" 
                                            class="bi bi-tag text-danger me-2" *ngIf="item.precio_status != 0">
                                            </i>
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Sin variaciones" 
                                            class="bi bi-palette text-danger me-2" *ngIf="item.variaciones.length == 0">
                                            </i>
                                            <i placement="top" tooltipClass="bg_toolip" ngbTooltip="Cantidad por contenedor incompleto." *ngIf="!item.producto.cantidad_contenedor"
                                            class="bi bi-app text-danger me-2">
                                            </i>
        
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-end">
                                        <div class="symbol-group symbol-hover flex-grow-1 min-w-100px pe-2 d-flex justify-content-end">
                                            <!--begin::User-->
                                            <div class="symbol symbol-circle symbol-25px" *ngFor="let subitem of item.variaciones" (click)="redirect_detail(subitem._id)">
                                                <div  *ngIf="item.producto.tipo == 'Ropa'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}} {{subitem.talla}}">
                                                    {{subitem.talla}}
                                                </div>
                                                <div *ngIf="item.producto.tipo == 'Tela'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}}">
                                            
                                                </div>
                                                <div *ngIf="item.producto.tipo == 'Acero'" style="cursor: pointer;border: 1px dashed #ccc;" class="symbol-label fs-8 fw-semibold text-inverse-primary" [ngStyle]="{'background-color': subitem.hxd}"  
                                                placement="top" tooltipClass="bg_toolip" ngbTooltip="{{subitem.variacion_name}}">
                                            
                                                </div>
                                            </div>
                                            <!--end::User-->
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer d-flex" style="padding: 1.3rem 2.25rem;">
                                    <a class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px" data-bs-toggle="modal" [attr.data-bs-target]="'#delete-'+item.producto._id">
                                                                            
                                        <span *ngIf="item.producto.estado == 'Publicado'" class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.3" d="M6 19.7C5.7 19.7 5.5 19.6 5.3 19.4C4.9 19 4.9 18.4 5.3 18L18 5.3C18.4 4.9 19 4.9 19.4 5.3C19.8 5.7 19.8 6.29999 19.4 6.69999L6.7 19.4C6.5 19.6 6.3 19.7 6 19.7Z" fill="currentColor"/>
                                            <path d="M18.8 19.7C18.5 19.7 18.3 19.6 18.1 19.4L5.40001 6.69999C5.00001 6.29999 5.00001 5.7 5.40001 5.3C5.80001 4.9 6.40001 4.9 6.80001 5.3L19.5 18C19.9 18.4 19.9 19 19.5 19.4C19.3 19.6 19 19.7 18.8 19.7Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                        
                                        <span *ngIf="item.producto.estado == 'Borrador'" class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                            <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    </a>
                                    <a [routerLink]="['/ventas/create']" [queryParams]="{payload: item.producto._id,tipo: 'producto'}" target="_blank" placement="left" ngbTooltip="Ir a venta" class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <i class="bi bi-arrow-up-right"></i>
                                        <!--end::Svg Icon-->
                                    </a>
                                    <a [routerLink]="['/informes/reporte-pedidos', item.producto._id]" target="_blank" placement="left" ngbTooltip="Future Stock" class="btn btn-sm me-3 btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <i class="bi bi-box"></i>
                                        <!--end::Svg Icon-->
                                    </a>
                                    <a placement="left" ngbTooltip="Editar producto" [routerLink]="['/productos/edit',item.producto._id]" class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                        <span class="svg-icon svg-icon-3">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path opacity="0.3" d="M21.4 8.35303L19.241 10.511L13.485 4.755L15.643 2.59595C16.0248 2.21423 16.5426 1.99988 17.0825 1.99988C17.6224 1.99988 18.1402 2.21423 18.522 2.59595L21.4 5.474C21.7817 5.85581 21.9962 6.37355 21.9962 6.91345C21.9962 7.45335 21.7817 7.97122 21.4 8.35303ZM3.68699 21.932L9.88699 19.865L4.13099 14.109L2.06399 20.309C1.98815 20.5354 1.97703 20.7787 2.03189 21.0111C2.08674 21.2436 2.2054 21.4561 2.37449 21.6248C2.54359 21.7934 2.75641 21.9115 2.989 21.9658C3.22158 22.0201 3.4647 22.0084 3.69099 21.932H3.68699Z" fill="currentColor"></path>
                                                <path d="M5.574 21.3L3.692 21.928C3.46591 22.0032 3.22334 22.0141 2.99144 21.9594C2.75954 21.9046 2.54744 21.7864 2.3789 21.6179C2.21036 21.4495 2.09202 21.2375 2.03711 21.0056C1.9822 20.7737 1.99289 20.5312 2.06799 20.3051L2.696 18.422L5.574 21.3ZM4.13499 14.105L9.891 19.861L19.245 10.507L13.489 4.75098L4.13499 14.105Z" fill="currentColor"></path>
                                            </svg>
                                        </span>
                                        <!--end::Svg Icon-->
                                    </a>
                                
                                    
                                    <div class="modal fade" id="duplicar-{{item.producto._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h3 class="modal-title">Duplicar producto</h3>
                                                        <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                            <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/metronic/releases/2022-07-14-092914/core/html/src/media/icons/duotune/arrows/arr088.svg-->
                                                            <span class="svg-icon svg-icon-muted svg-icon-2hx"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <rect opacity="0.5" x="7.05025" y="15.5356" width="12" height="2" rx="1" transform="rotate(-45 7.05025 15.5356)" fill="currentColor"/>
                                                                <rect x="8.46447" y="7.05029" width="12" height="2" rx="1" transform="rotate(45 8.46447 7.05029)" fill="currentColor"/>
                                                                </svg>
                                                            </span>
                                                                <!--end::Svg Icon-->
                                                        </div>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>Confirmación para la duplicación del producto junto con sus colores, compocisiones y títulos.</p>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button  data-bs-dismiss="modal" aria-label="Close" class="btn btn-light me-3">
                                                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                                                </svg>
                                                            </span>
                                
                                                            Descartar
                                                        </button>
                                                        <ng-container >
                                                            <button *ngIf="!load_btn_duplicar" type="button" class="btn btn-dark" (click)="duplicar(item.producto._id)">
                                                                <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                                    <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                                    </svg>
                                                                </span>
                                                                Confirmar
                                                            </button>
                                                            <button *ngIf="load_btn_duplicar" class="btn btn-dark" type="button" disabled>
                                                                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                                                Procensando...
                                                            </button>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                    </div> 
                                    <div class="modal fade" id="delete-{{item.producto._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Desactivar {{item.producto.titulo}}</h3>
                                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                        <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/metronic/releases/2022-07-14-092914/core/html/src/media/icons/duotune/arrows/arr088.svg-->
                                                        <span class="svg-icon svg-icon-muted svg-icon-2hx"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <rect opacity="0.5" x="7.05025" y="15.5356" width="12" height="2" rx="1" transform="rotate(-45 7.05025 15.5356)" fill="currentColor"/>
                                                            <rect x="8.46447" y="7.05029" width="12" height="2" rx="1" transform="rotate(45 8.46447 7.05029)" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                            <!--end::Svg Icon-->
                                                    </div>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Confirmación para la eliminación del producto.</p>
                                                </div>
                                                <div class="modal-footer">
                                                    
                                                    <button type="button" id="kt_modal_new_card_cancel" class="btn btn-light me-3"  data-bs-dismiss="modal">
                                                        <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                        Descartar
                                                    </button>
    
                                                    <button *ngIf="!load_del" type="button" class="btn btn-dark" (click)="delete_producto(item.producto._id)">
                                                        <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                            <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                                            </svg>
                                                        </span>
                                                        Confirmar
                                                    </button>
    
                                                    <button *ngIf="load_del" class="btn btn-dark" type="button" disabled>
                                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                                        Procesando...
                                                    </button>
    
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                    <!--end::Menu-->
                                </div>
                            </div>
                            
                        </ng-container>

                    </div>
                    <!--end::Container-->
                </div>
                <!--end::Post-->
            </div>
           
        </div>
        <!--end::Wrapper-->
    </div>
    <!--end::Page-->
</div>


<div class="modal fade" id="importModal" tabindex="-1" style="display: none;" aria-hidden="true">
    <!--begin::Modal dialog-->
    <div class="modal-dialog modal-dialog-centered mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
            <!--begin::Modal header-->
            <div class="modal-header">
                <!--begin::Modal title-->
                <h3 class="fw-700">Importar productos</h3>
                <!--end::Modal title-->
                <!--begin::Close-->
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                    <span class="svg-icon svg-icon-1">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
                        </svg>
                    </span>
                    <!--end::Svg Icon-->
                </div>
                <!--end::Close-->
            </div>
            <!--end::Modal header-->
            <!--begin::Modal body-->
            <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                <!--begin::Form-->
                <div class="form fv-plugins-bootstrap5 fv-plugins-framework">
                    <!--begin::Input group-->
                    <div class="row fv-row fv-plugins-icon-container">
                        <!--begin::Col-->
                        <div class="col-12">
                            <label class="required fs-6 fw-semibold form-label mb-2">Documento XLS</label>
                            <div class="input-group mb-2">
                                <input id="input_xls" type="file" class="form-control form-control-solid mb-3" (change)="upload_xls($event)" accept=".xls,.xlsx">
                                <div class="input-group-append">
                                  <button class="btn btn-danger" (click)="remove_xls()" style="border-radius: 0px !important;">Quitar</button>
                                </div>
                            </div>

                            <small class="text-success cursor-pointer">Descargar modelo XLS</small>
                      
                        </div>
                    </div>
                    <!--end::Input group-->
                    <div class="alert alert-dismissible bg-light-danger border border-danger border-dashed d-flex flex-column flex-sm-row w-100 p-5" *ngIf="error_xls">
                        <div class="d-flex flex-column pe-0 pe-sm-10">
                            <h5 class="mb-1">Consola de errores</h5>
                            <span>{{error_xls}}</span>
                        </div>
                    </div>
                    <div class="alert alert-dismissible bg-light-success border border-success border-dashed d-flex flex-column flex-sm-row w-100 p-5" *ngIf="!error_xls && data_xls.length >= 1">
                        <div class="d-flex flex-column pe-0 pe-sm-10">
                            <h5 class="mb-1" style="color: #4c6c5f">Validado correctamente.</h5>
                            <span>Se leyeron {{data_xls.length+1}} registros en el XLS.</span>
                        </div>
                    </div>
                    <!--begin::Input group-->
                   
                    <!--begin::Actions-->
                    <div class="text-center pt-10">
                        <button type="reset" id="kt_modal_new_card_cancel" class="btn btn-light me-3" data-bs-dismiss="modal">
                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                </svg>
                            </span>

                            Descartar
                        </button>
                        <button *ngIf="!load_importar" type="button" class="btn btn-dark" (click)="importar()">
                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                </svg>
                            </span>
                            Importar
                        </button>
                        <button *ngIf="load_importar" class="btn btn-dark" type="button" disabled>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            Procensando...
                        </button>
                    </div>
                    <!--end::Actions-->
                </div>
                <!--end::Form-->
            </div>
            <!--end::Modal body-->
        </div>
        <!--end::Modal content-->
    </div>
    <!--end::Modal dialog-->
</div>
