<div class="d-flex flex-column flex-root">
    <!--begin::Page-->
    <div class="page d-flex flex-row flex-column-fluid">
        <!--begin::Aside-->
        <app-side-bar (eventPermisos)="handlePermisos($event)"></app-side-bar>
        <!--end::Aside-->
        <!--begin::Wrapper-->
        <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
            <!--begin::Header-->
            <app-top-bar></app-top-bar>
            <!--end::Header-->
            <!--begin::Content-->
            <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                <!--begin::Toolbar-->
                <div class="toolbar" id="kt_toolbar">
                    <!--begin::Container-->
                    <div id="kt_toolbar_container" class="container-fluid d-flex flex-stack">
                        <!--begin::Page title-->
                        <div data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}" class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
                            <!--begin::Title-->
                            <h1 class="d-flex align-items-center text-dark fw-bolder fs-3 my-1">Productos
                                <!--begin::Separator-->
                                <span class="h-20px border-gray-200 border-start mx-5"></span>
                                <!--end::Separator-->
                                <!--begin::Description-->
                                <ol class="breadcrumb text-muted fs-6 fw-semibold">
                                    <li class="breadcrumb-item pe-3">
                                        <a [routerLink]="['/productos']"  class="pe-3">
                                            Productos
                                        </a>
                                    </li>
                                    <li class="breadcrumb-item pe-3">Colores</li>
                                </ol>
                      
                                <!--end::Description--></h1>
                            <!--end::Title-->
                        </div>
                        <!--end::Page title-->
                        <!--begin::Actions-->
                        <div class="d-flex align-items-center py-1">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="text-muted fw-bold fs-7">Panel Administrador</span>
                            </h3>
                        </div>
                        <!--end::Actions-->
                    </div>
                    <!--end::Container-->
                </div>
                <!--end::Toolbar-->
                <!--begin::Post-->
                <div class="post d-flex flex-column-fluid" id="kt_post">
                    <!--begin::Container-->
                    <div id="kt_content_container" class="container-xxl">
                        <!--begin::Row-->
                        <div class="row gy-5 g-xl-8">
                            <div class="col-12">
                                <div class="card">
                                    <!--begin::Card header-->
                                    <div class="card-header border-0 py-7">
                                        <!--begin::Title-->
                                        <!--begin::Tabs-->
                                        <h3 class="card-title align-items-start flex-column">
                                            <span class="card-label fw-bold fs-3 mb-1 fw-700">Colores</span>
                                            <span class="text-muted mt-1 fw-semibold fs-7 d-none d-sm-block">Lorem ipsum dolor sit amet consectetur adipisicing elit.</span>
                                        </h3>
                                        <!--end::Tabs-->
                                        <!--end::Title-->

                                        <div class="card-toolbar">
                                            <a *ngIf="permisos.includes('3009')" class="btn btn-dark fw-bold" data-bs-toggle="modal" 
                                            [attr.data-bs-target]="'#newColor'">
                                                <span class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path opacity="0.3" d="M20.859 12.596L17.736 13.596L10.388 20.944C10.2915 21.0406 10.1769 21.1172 10.0508 21.1695C9.9247 21.2218 9.78953 21.2486 9.65302 21.2486C9.5165 21.2486 9.3813 21.2218 9.25519 21.1695C9.12907 21.1172 9.01449 21.0406 8.918 20.944L2.29999 14.3229C2.10543 14.1278 1.99619 13.8635 1.99619 13.588C1.99619 13.3124 2.10543 13.0481 2.29999 12.853L11.853 3.29999C11.9495 3.20341 12.0641 3.12679 12.1902 3.07452C12.3163 3.02225 12.4515 2.9953 12.588 2.9953C12.7245 2.9953 12.8597 3.02225 12.9858 3.07452C13.1119 3.12679 13.2265 3.20341 13.323 3.29999L21.199 11.176C21.3036 11.2791 21.3797 11.4075 21.4201 11.5486C21.4605 11.6898 21.4637 11.8391 21.4295 11.9819C21.3953 12.1247 21.3249 12.2562 21.2249 12.3638C21.125 12.4714 20.9989 12.5514 20.859 12.596Z" fill="currentColor"/>
                                                    <path d="M14.8 10.184C14.7447 10.1843 14.6895 10.1796 14.635 10.1699L5.816 8.69997C5.55436 8.65634 5.32077 8.51055 5.16661 8.29469C5.01246 8.07884 4.95035 7.8106 4.99397 7.54897C5.0376 7.28733 5.18339 7.05371 5.39925 6.89955C5.6151 6.7454 5.88334 6.68332 6.14498 6.72694L14.963 8.19692C15.2112 8.23733 15.435 8.36982 15.59 8.56789C15.7449 8.76596 15.8195 9.01502 15.7989 9.26564C15.7784 9.51626 15.6642 9.75001 15.479 9.92018C15.2939 10.0904 15.0514 10.1846 14.8 10.184ZM17 18.6229C17 19.0281 17.0985 19.4272 17.287 19.7859C17.4755 20.1446 17.7484 20.4521 18.0821 20.6819C18.4158 20.9117 18.8004 21.0571 19.2027 21.1052C19.605 21.1534 20.0131 21.103 20.3916 20.9585C20.7702 20.814 21.1079 20.5797 21.3758 20.2757C21.6437 19.9716 21.8336 19.607 21.9293 19.2133C22.025 18.8195 22.0235 18.4085 21.925 18.0154C21.8266 17.6223 21.634 17.259 21.364 16.9569L19.843 15.257C19.7999 15.2085 19.7471 15.1697 19.688 15.1432C19.6289 15.1167 19.5648 15.1029 19.5 15.1029C19.4352 15.1029 19.3711 15.1167 19.312 15.1432C19.2529 15.1697 19.2001 15.2085 19.157 15.257L17.636 16.9569C17.2254 17.4146 16.9988 18.0081 17 18.6229ZM10.388 20.9409L17.736 13.5929H1.99999C1.99921 13.7291 2.02532 13.8643 2.0768 13.9904C2.12828 14.1165 2.2041 14.2311 2.29997 14.3279L8.91399 20.9409C9.01055 21.0381 9.12539 21.1152 9.25188 21.1679C9.37836 21.2205 9.51399 21.2476 9.65099 21.2476C9.78798 21.2476 9.92361 21.2205 10.0501 21.1679C10.1766 21.1152 10.2914 21.0381 10.388 20.9409Z" fill="currentColor"/>
                                                    </svg>
                                                </span>
                                                Nuevo color
                                            </a>
                                        </div>
                                    </div>
                                    <!--end::Card header-->
                              
                                    <div class="card-body pt-0">
                                        <ng-container *ngIf="!load_data">
                                            <div class="table-responsive" *ngIf="colores.length >= 1">
                                                <!--begin::Table-->
                                                <table class="table table-row-dashed align-middle gs-0 gy-3 my-0">
                                                    
                                                    <tbody>
                                                                                
                                                            <tr *ngFor="let item of colores| slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">                            
                                                                <td>
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="symbol symbol-50px me-3" style="width: 40px !important;
                                                                        height: 40px !important;border: 1px dashed #ccc !important;border-radius: 50%;" [ngStyle]="{'background-color': item.color.hxd}">            
                                                                        </div>
                                                                        
                                                                        <div class="m-0" bis_skin_checked="1">                            
                                                                            <span class="fw-semibold text-gray-400 d-block fs-8">Color</span>
                                                                            <span class="fw-600 text-gray-800 fs-7">
                                                                                {{item.color.color}}
                                                                            </span>
                                                                        </div>
                                                                    </div>                                
                                                                </td>
                                                                <td>
                                                                    <div [ngStyle]="{'background': subitem.hxd}" 
                                                                    *ngFor="let subitem of item.etiquetas" 
                                                                    class="badge badge-primary mb-1 me-3"
                                                                    style="height: fit-content !important;">
                                                                        {{subitem.etiqueta}}
                                                                    </div>
                                                                </td>
                                                                
                                                                <td  class="text-end">
                                                                    <ng-container *ngIf="item.productos.length >= 1">
                                                                        <div class="symbol-group symbol-hover mb-1 d-flex justify-content-end">
                                                                            <!--begin::Member-->
                                                                            <div class="symbol symbol-circle symbol-25px" *ngFor="let subitem of item.productos">
                                                                                <img [src]="subitem.producto.portada" alt="" />
                                                                            </div>
                                                                            <!--end::Member-->
                                                                        </div>
                                                                    </ng-container>
                                                                </td>  
                                                                <td class="text-end" style="width: 100px;" *ngIf="permisos.includes('3010')">
                                                                    <a [routerLink]="['/productos/colores',item.color._id]" class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary w-30px h-30px" placement="top" ngbTooltip="Detalle color">
                                                                        <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                                                        <span class="svg-icon svg-icon-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                            <path d="M14.4 11H3C2.4 11 2 11.4 2 12C2 12.6 2.4 13 3 13H14.4V11Z" fill="currentColor"/>
                                                                            <path opacity="0.3" d="M14.4 20V4L21.7 11.3C22.1 11.7 22.1 12.3 21.7 12.7L14.4 20Z" fill="currentColor"/>
                                                                            </svg>
                                                                        </span>
                                                                        <!--end::Svg Icon-->
                                                                    </a>
                                                                </td>
                                                            </tr>                        
                                                            
                                                    </tbody>
                                                    <!--end::Table body-->
                                                </table>
                                            </div>

                                            <div *ngIf="colores.length == 0" class="d-flex flex-row-fluid flex-column flex-column-fluid text-center p-10 py-lg-20">
                                                <!--begin::Logo-->
                                                <a  class="pt-lg-20">
                                                    <img alt="Logo" src="assets/images/logotipo.png" class="theme-light-show" style="height: 80px !important;">    
                                                </a> 
                                                <!--begin::Message-->
                                                <div class="fw-semibold fs-6 text-muted mb-15">
                                                    Lo sentimos, pero no se encontraron resultados para tu búsqueda.
                                                </div>      
                                 
                                        
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="load_data">
                                            <div class="py-20 text-center">
                                                <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                                                    <span class="sr-only">Loading...</span>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                   
                                    <div class="card-footer text-center"  *ngIf="colores.length >= 1">
                                        <ngb-pagination
                                            [(page)]="page"
                                            [pageSize]="pageSize"
                                            [maxSize]="10"
                                            [rotate]="true" [boundaryLinks]="true"
                                            [collectionSize]="colores.length"></ngb-pagination>
                                    </div>
                                    <!--end::Card body-->
                                </div>
                            </div>
                        </div>
                       
                    </div>
                    <!--end::Container-->
                </div>
                <!--end::Post-->
            </div>
           
        </div>
        <!--end::Wrapper-->
    </div>
    <!--end::Page-->
</div>


<div class="modal fade" id="newColor" tabindex="-1" style="display: none;" aria-hidden="true">
    <!--begin::Modal dialog-->
    <div class="modal-dialog modal-dialog-centered mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
            <!--begin::Modal header-->
            <div class="modal-header">
                <!--begin::Modal title-->
                <h2 class="fw-700">Nuevo color</h2>
                <!--end::Modal title-->
                <!--begin::Close-->
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                    <span class="svg-icon svg-icon-1">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
                        </svg>
                    </span>
                    <!--end::Svg Icon-->
                </div>
                <!--end::Close-->
            </div>
            <!--end::Modal header-->
            <!--begin::Modal body-->
            <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                <!--begin::Form-->
                <div class="form fv-plugins-bootstrap5 fv-plugins-framework">
                    <!--begin::Input group-->
                    <div class="row fv-row fv-plugins-icon-container mb-10">
                        <!--begin::Col-->
                        <div class="col-6 mb-7">
                            <label class="required fs-6 fw-semibold form-label mb-2">Variación</label>
                            <input type="text" class="form-control form-control-solid" placeholder="HUNTER05" name="color" [(ngModel)]="color.color" (keyup)="toUpperCase()">
                        </div>
                        <!--end::Col-->
                        <!--begin::Col-->
                        <div class="col-6 mb-7">
                            <label class="required fs-6 fw-semibold form-label mb-2">Hexadecimal</label>
                            <input type="text" id="color-picker"  class="form-control"  style="width:100% !important"/>
                        </div>
                        <!--end::Col-->
                        <div class="col-12 mb-7">
                            <label class="required fs-6 fw-semibold form-label mb-2">Contraseña</label>
                            <input type="text" class="form-control form-control-solid" placeholder="Clave de acceso" name="password" [(ngModel)]="color.password">
                        </div>
                        
                        <!--begin::Col-->
                        <div class="col-12">
                            <label class="required fs-6 fw-semibold form-label mb-2">¿Es color base?</label>
                            <!--begin::Switch-->
                            <label class="form-check form-switch form-check-custom form-check-solid">
                                <input class="form-check-input" type="checkbox" name="primario" [(ngModel)]="color.primario"/>
                                <span class="form-check-label fw-semibold text-muted" *ngIf="color.primario">
                                    Color base activado
                                </span>
                                <span class="form-check-label fw-semibold text-muted" *ngIf="!color.primario">
                                    Color base desactivado
                                </span>
                            </label>
                            <!--end::Switch-->
                        </div>
                        <!--end::Col-->
                    </div>
                    <!--end::Input group-->
                   
                    <!--begin::Input group-->
                    <div class="row fv-row fv-plugins-icon-container" *ngIf="msm_error_crear">
                        <!--begin::Col-->
                        <div class="col-12 text-center">
                            <span class="text-danger"><b>{{msm_error_crear}}</b></span>
                        </div>
                    </div>
                    <!--end::Input group-->
                    <!--begin::Actions-->
                    <div class="text-center pt-10">
                        <button type="reset" id="kt_modal_new_card_cancel" class="btn btn-light me-3">
                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"/>
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"/>
                                </svg>
                            </span>
                            Descartar
                        </button>
                        <button *ngIf="!btn_add_color" type="button" class="btn btn-dark" (click)="crear_color()">
                            <span class="svg-icon svg-icon-3 ms-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path opacity="0.3" d="M10 18C9.7 18 9.5 17.9 9.3 17.7L2.3 10.7C1.9 10.3 1.9 9.7 2.3 9.3C2.7 8.9 3.29999 8.9 3.69999 9.3L10.7 16.3C11.1 16.7 11.1 17.3 10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                <path d="M10 18C9.7 18 9.5 17.9 9.3 17.7C8.9 17.3 8.9 16.7 9.3 16.3L20.3 5.3C20.7 4.9 21.3 4.9 21.7 5.3C22.1 5.7 22.1 6.30002 21.7 6.70002L10.7 17.7C10.5 17.9 10.3 18 10 18Z" fill="currentColor"/>
                                </svg>
                            </span>
                            Crear
                        </button>
                        <button *ngIf="btn_add_color" class="btn btn-dark" type="button" disabled>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            Procensando...
                        </button>
                    </div>
                    <!--end::Actions-->
                </div>
                <!--end::Form-->
            </div>
            <!--end::Modal body-->
        </div>
        <!--end::Modal content-->
    </div>
    <!--end::Modal dialog-->
</div>